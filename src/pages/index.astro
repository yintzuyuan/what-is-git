---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout>
  <!-- ═══════════════════════════════════════════════════════════════
       序章：標題
       ═══════════════════════════════════════════════════════════════ -->
  <section class="chapter" id="intro">
    <div class="chapter__inner">
      <h1 class="chapter__title reveal-title glow-text gradient-text--hero">
        什麼是 Git？
      </h1>
      <p class="chapter__subtitle reveal reveal-delay-1">
        讓你不再需要「檔案_v3_final_真的final」
      </p>
      <div class="divider reveal reveal-delay-2"></div>
      <div class="chapter__body">
        <p class="reveal reveal-delay-3">
          Git 不是程式設計師的專屬工具。<br />
          它是<strong>創作流程</strong>的核心——無論你是平面設計師、字型設計師，還是藝術家。
        </p>
        <p class="reveal reveal-delay-4">
          本教學會展示指令，讓你了解「背後發生什麼事」——<br />
          但日常使用，<strong>圖形化工具</strong>一樣好用。
        </p>
        <p class="scroll-hint reveal reveal-delay-5">
          <span class="scroll-hint__text">向下捲動，開始探索</span>
          <i class="ph ph-caret-down scroll-hint__arrow" aria-hidden="true"></i>
        </p>
      </div>
    </div>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════
       第一章：秩序的紮根 (Root)
       ═══════════════════════════════════════════════════════════════ -->
  <section class="chapter" id="ch1-root">
    <div class="chapter__inner">
      <span class="chapter__eyebrow reveal">第一章</span>
      <h2 class="chapter__title reveal-title">
        <i class="ph ph-folder-plus chapter__icon"></i>
        <span class="chapter__title-en">init</span>
        <span class="chapter__title-zh">初始化</span>
      </h2>
      <div class="chapter__body">
        <p class="reveal reveal-delay-2">
          在專案資料夾執行 <code>git init</code>，<br />
          Git 就會開始追蹤這個資料夾的變化。
        </p>

        <!-- CLI 區塊 -->
        <div class="cli-block reveal reveal-delay-3">
          <div class="cli-block__content">
            <span class="cli-block__prompt">$</span>
            <code class="cli-block__command">git init</code>
          </div>
          <button class="cli-block__copy" type="button" aria-label="複製指令">
            <i class="ph ph-copy cli-block__copy-icon"></i>
            <span>複製</span>
          </button>
        </div>

        <!-- 安裝引導 -->
        <div class="divider reveal reveal-delay-4"></div>
        <h3 class="reveal reveal-delay-5">安裝 Git</h3>
        <ul class="tools-list reveal reveal-delay-6">
          <li>
            <a href="https://git-scm.com/downloads" target="_blank" rel="noopener"><strong>官方下載</strong></a>
            <span>— 支援 Windows、macOS、Linux</span>
          </li>
          <li>
            <a href="https://desktop.github.com/" target="_blank" rel="noopener"><strong>GitHub Desktop</strong></a>
            <span>— 圖形介面，內建 Git</span>
          </li>
        </ul>
      </div>
    </div>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════
       第二章：線性的累積 (Trunk)
       ═══════════════════════════════════════════════════════════════ -->
  <section class="chapter" id="ch2-trunk">
    <div class="chapter__inner">
      <span class="chapter__eyebrow reveal">第二章</span>
      <h2 class="chapter__title reveal-title">
        <i class="ph ph-git-commit chapter__icon"></i>
        <span class="chapter__title-en">commit</span>
        <span class="chapter__title-zh">提交</span>
      </h2>
      <div class="chapter__body">
        <p class="reveal reveal-delay-2">
          每一次 <code>commit</code> 都是一個存檔點，<br />
          搭配一段訊息說明這次改了什麼。
        </p>

        <!-- CLI 區塊 -->
        <div class="cli-block reveal reveal-delay-3">
          <div class="cli-block__content">
            <span class="cli-block__prompt">$</span>
            <code class="cli-block__command">git commit -m "訊息"</code>
          </div>
          <button class="cli-block__copy" type="button" aria-label="複製指令">
            <i class="ph ph-copy cli-block__copy-icon"></i>
            <span>複製</span>
          </button>
        </div>

        <!-- Conventional Commits 說明（可折疊） -->
        <details class="inline-callout inline-callout--collapsible reveal reveal-delay-4">
          <summary>
            <i class="ph-fill ph-lightbulb inline-callout__icon"></i>
            <span>進階：約定式提交格式</span>
          </summary>
          <div class="inline-callout__content">
            <p>團隊協作時，統一的提交格式讓歷史更易讀。<br />一開始只要寫清楚改了什麼就好：</p>
            <ul class="commit-types">
              <li><code>feat:</code> 新功能</li>
              <li><code>fix:</code> 修正錯誤</li>
              <li><code>docs:</code> 文件更新</li>
              <li><code>refactor:</code> 重構</li>
            </ul>
          </div>
        </details>

        <!-- 範例 -->
        <div class="inline-callout reveal reveal-delay-5">
          <i class="ph ph-code inline-callout__icon"></i>
          <p>
            範例：<code>git commit -m "feat: 新增深色模式"</code>
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════
       第三章：空間的共鳴 (Sync)
       ═══════════════════════════════════════════════════════════════ -->
  <section class="chapter" id="ch3-sync">
    <div class="chapter__inner">
      <span class="chapter__eyebrow reveal">第三章</span>
      <h2 class="chapter__title reveal-title">
        <i class="ph ph-cloud-arrow-up chapter__icon"></i>
        <span class="chapter__title-en">push</span>
        <span class="chapter__title-zh">推送</span>
      </h2>
      <div class="chapter__body">
        <p class="reveal reveal-delay-2">
          把本地的 commit 推送到雲端——<br />
          就像把 Figma 存到雲端，讓你在別台電腦也能開。
        </p>

        <!-- CLI 區塊 -->
        <div class="cli-block reveal reveal-delay-3">
          <div class="cli-block__content">
            <span class="cli-block__prompt">$</span>
            <code class="cli-block__command">git push origin main</code>
          </div>
          <button class="cli-block__copy" type="button" aria-label="複製指令">
            <i class="ph ph-copy cli-block__copy-icon"></i>
            <span>複製</span>
          </button>
        </div>

        <!-- 遠端服務推薦 -->
        <div class="divider reveal reveal-delay-4"></div>
        <h3 class="reveal reveal-delay-5">遠端服務</h3>
        <ul class="tools-list reveal reveal-delay-6">
          <li>
            <a href="https://github.com/" target="_blank" rel="noopener"><strong>GitHub</strong></a>
            <span>— 最流行的開源平台，社群活躍</span>
          </li>
          <li>
            <a href="https://gitlab.com/" target="_blank" rel="noopener"><strong>GitLab</strong></a>
            <span>— 可自架，CI/CD 整合完善</span>
          </li>
          <li>
            <a href="https://bitbucket.org/" target="_blank" rel="noopener"><strong>Bitbucket</strong></a>
            <span>— Atlassian 生態系，適合團隊</span>
          </li>
        </ul>
      </div>
    </div>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════
       第四章：維度的偏轉 (Branching)
       ═══════════════════════════════════════════════════════════════ -->
  <section class="chapter" id="ch4-branch">
    <div class="chapter__inner">
      <span class="chapter__eyebrow reveal">第四章</span>
      <h2 class="chapter__title reveal-title">
        <i class="ph ph-git-branch chapter__icon"></i>
        <span class="chapter__title-en">branch</span>
        <span class="chapter__title-zh">分支</span>
      </h2>
      <div class="chapter__body">
        <p class="reveal reveal-delay-2">
          建立分支，就像「另存新檔」試新配色——<br />
          但 Git 記得它們的關係，隨時可以合併回來。
        </p>

        <!-- CLI 區塊 -->
        <div class="cli-block reveal reveal-delay-3">
          <div class="cli-block__content">
            <span class="cli-block__prompt">$</span>
            <code class="cli-block__command">git checkout -b 類型/描述</code>
          </div>
          <button class="cli-block__copy" type="button" aria-label="複製指令">
            <i class="ph ph-copy cli-block__copy-icon"></i>
            <span>複製</span>
          </button>
        </div>

        <!-- 範例 -->
        <div class="inline-callout reveal reveal-delay-4">
          <i class="ph-fill ph-lightbulb inline-callout__icon"></i>
          <p>
            範例：<code>git checkout -b feat/dark-mode</code>
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════
       第五章：下一步要去哪 (Issue)
       ═══════════════════════════════════════════════════════════════ -->
  <section class="chapter" id="ch5-issue">
    <div class="chapter__inner">
      <span class="chapter__eyebrow reveal">第五章</span>
      <h2 class="chapter__title reveal-title">
        <i class="ph ph-chat-circle-dots chapter__icon"></i>
        <span class="chapter__title-en">issue</span>
        <span class="chapter__title-zh">議題</span>
      </h2>
      <div class="chapter__body">
        <p class="reveal reveal-delay-2">
          <strong>Git</strong> 是版本控制工具，<strong>GitHub</strong> 是存放專案的平台。<br />
          Issue 是 GitHub 提供的專案管理功能——<br />
          就像 Notion 的待辦事項，但跟你的檔案直接連結。
        </p>

        <!-- 內嵌概念卡片（小螢幕顯示，大螢幕由星座標籤取代） -->
        <div class="inline-card inline-card--issue mobile-only reveal reveal-delay-3">
          <div class="inline-card__header">
            <i class="ph-fill ph-circle inline-card__icon"></i>
            <h3 class="inline-card__title">首頁載入太慢</h3>
          </div>
          <p class="inline-card__body">
            圖片沒有壓縮，需要優化
          </p>
        </div>

        <!-- CLI 區塊 -->
        <div class="cli-block reveal reveal-delay-4">
          <div class="cli-block__content">
            <span class="cli-block__prompt">$</span>
            <code class="cli-block__command">gh issue create</code>
          </div>
          <button class="cli-block__copy" type="button" aria-label="複製指令">
            <i class="ph ph-copy cli-block__copy-icon"></i>
            <span>複製</span>
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════
       第六章：匯流前的回望 (PR)
       ═══════════════════════════════════════════════════════════════ -->
  <section class="chapter" id="ch6-pr">
    <div class="chapter__inner">
      <span class="chapter__eyebrow reveal">第六章</span>
      <h2 class="chapter__title reveal-title">
        <i class="ph ph-git-pull-request chapter__icon"></i>
        <span class="chapter__title-en">pull request</span>
        <span class="chapter__title-zh">拉取請求（PR）</span>
      </h2>
      <div class="chapter__body">
        <p class="reveal reveal-delay-2">
          分支完成後，發起 Pull Request（簡稱 PR）請求合併。<br />
          「Pull」的意思是：你「請求」對方把你的分支「拉」進主線。
        </p>

        <!-- 內嵌概念卡片（小螢幕顯示，大螢幕由星座標籤取代） -->
        <div class="inline-card inline-card--pr mobile-only reveal reveal-delay-3">
          <div class="inline-card__header">
            <i class="ph ph-git-pull-request inline-card__icon"></i>
            <h3 class="inline-card__title">新增深色模式</h3>
          </div>
          <p class="inline-card__body">
            feat/dark-mode → main
          </p>
        </div>

        <!-- CLI 區塊 -->
        <div class="cli-block reveal reveal-delay-4">
          <div class="cli-block__content">
            <span class="cli-block__prompt">$</span>
            <code class="cli-block__command">gh pr create</code>
          </div>
          <button class="cli-block__copy" type="button" aria-label="複製指令">
            <i class="ph ph-copy cli-block__copy-icon"></i>
            <span>複製</span>
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════
       第七章：邏輯的歸一 (Convergence)
       ═══════════════════════════════════════════════════════════════ -->
  <section class="chapter" id="ch7-merge">
    <div class="chapter__inner">
      <span class="chapter__eyebrow reveal">第七章</span>
      <h2 class="chapter__title reveal-title">
        <i class="ph ph-git-merge chapter__icon"></i>
        <span class="chapter__title-en">merge</span>
        <span class="chapter__title-zh">合併</span>
      </h2>
      <div class="chapter__body">
        <p class="reveal reveal-delay-2">
          審查通過後，將分支合併回主線。<br />
          如果有衝突，Git 會提示你手動解決。
        </p>

        <!-- 內嵌概念卡片（小螢幕顯示，大螢幕由星座標籤取代） -->
        <div class="inline-card inline-card--merged mobile-only reveal reveal-delay-3">
          <div class="inline-card__header">
            <i class="ph ph-git-merge inline-card__icon"></i>
            <h3 class="inline-card__title">新增深色模式</h3>
          </div>
          <p class="inline-card__body">
            feat/dark-mode → main
          </p>
        </div>

        <!-- CLI 區塊 -->
        <div class="cli-block reveal reveal-delay-4">
          <div class="cli-block__content">
            <span class="cli-block__prompt">$</span>
            <code class="cli-block__command">git merge 分支名稱</code>
          </div>
          <button class="cli-block__copy" type="button" aria-label="複製指令">
            <i class="ph ph-copy cli-block__copy-icon"></i>
            <span>複製</span>
          </button>
        </div>

        <!-- 範例 -->
        <div class="inline-callout reveal reveal-delay-5">
          <i class="ph-fill ph-lightbulb inline-callout__icon"></i>
          <p>
            範例：<code>git merge feat/dark-mode</code>
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════
       結尾：下一步
       ═══════════════════════════════════════════════════════════════ -->
  <section class="chapter" id="next-steps">
    <div class="chapter__inner">
      <span class="chapter__eyebrow reveal">結語</span>
      <h2 class="chapter__title reveal-title">
        <i class="ph ph-rocket-launch chapter__icon"></i>
        <span class="gradient-text">下一步</span>
      </h2>
      <div class="chapter__body">
        <p class="reveal reveal-delay-1">
          你已經掌握了 Git 的<strong>核心概念</strong>。<br />
          現在，試著用它吧。
        </p>
        <div class="divider reveal reveal-delay-2"></div>
        <h3 class="reveal reveal-delay-3">推薦工具</h3>
        <ul class="tools-list reveal reveal-delay-4">
          <li>
            <a href="https://desktop.github.com/" target="_blank" rel="noopener"><strong>GitHub Desktop</strong></a>
            <span>— 最友善的圖形介面，適合入門</span>
          </li>
          <li>
            <a href="https://code.visualstudio.com/" target="_blank" rel="noopener"><strong>VSCode</strong></a>
            <span>— 通用方案，編輯器內建 Git 整合</span>
          </li>
          <li>
            <a href="https://formkunft.com/light-table/" target="_blank" rel="noopener"><strong>Light Table</strong></a>
            <span>— Glyphs 外掛，字型設計師的版本比對工具</span>
          </li>
          <li>
            <a href="https://www.sourcetreeapp.com/" target="_blank" rel="noopener"><strong>Sourcetree</strong></a>
            <span>— 免費的進階圖形介面</span>
          </li>
        </ul>

        <!-- 5 分鐘快速開始 -->
        <div class="divider reveal reveal-delay-5"></div>
        <div class="quick-start reveal reveal-delay-6">
          <h3>5 分鐘開始</h3>
          <ol class="quick-start__steps">
            <li>下載 <a href="https://desktop.github.com/" target="_blank" rel="noopener">GitHub Desktop</a></li>
            <li>建立一個資料夾，放入你的設計檔</li>
            <li>在 GitHub Desktop 點「Add」→「Create New Repository」</li>
            <li>恭喜！你已經在使用 Git 了 🎉</li>
          </ol>
        </div>
      </div>
    </div>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════
       番外篇過渡：從個人到團隊
       ═══════════════════════════════════════════════════════════════ -->
  <section class="chapter chapter--transition" id="bonus-intro">
    <div class="chapter__inner">
      <div class="chapter__body">
        <p class="reveal reveal-delay-1">
          前面學的是<strong>個人工作流程</strong>。<br />
          當你開始跟團隊協作，會遇到一些新規則——<br />
          這些規則確保大家的改動不會互相覆蓋。
        </p>
      </div>
    </div>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════
       番外篇 1：Protected Branch（保護分支）
       ═══════════════════════════════════════════════════════════════ -->
  <section class="chapter" id="bonus-protected">
    <div class="chapter__inner">
      <span class="chapter__eyebrow reveal">番外篇 · 當你加入團隊</span>
      <h2 class="chapter__title reveal-title">
        <i class="ph ph-lock chapter__icon"></i>
        <span class="chapter__title-en">protected branch</span>
        <span class="chapter__title-zh">保護分支</span>
      </h2>
      <div class="chapter__body">
        <p class="reveal reveal-delay-2">
          <code>main</code> 是專案的<strong>穩定版本</strong>——<br />
          不能直接修改，所有變更都必須透過 PR。
        </p>

        <!-- 設計師類比 -->
        <div class="inline-callout reveal reveal-delay-3">
          <i class="ph-fill ph-lightbulb inline-callout__icon"></i>
          <p>
            想像設計系統的 Master Component——<br />
            團隊成員不能隨意更改，需要經過審核。
          </p>
        </div>

        <!-- 流程說明 -->
        <div class="divider reveal reveal-delay-4"></div>
        <h3 class="reveal reveal-delay-5">保護機制</h3>
        <ul class="tools-list reveal reveal-delay-6">
          <li>
            <strong>禁止直接 push</strong>
            <span>— 防止未經審查的內容進入 main</span>
          </li>
          <li>
            <strong>強制 PR 審查</strong>
            <span>— 至少一位成員核准才能合併</span>
          </li>
          <li>
            <strong>自動檢查通過</strong>
            <span>— 確認沒有明顯錯誤才允許合併</span>
          </li>
        </ul>
      </div>
    </div>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════
       番外篇 2：Code Review（變更審查）
       ═══════════════════════════════════════════════════════════════ -->
  <section class="chapter" id="bonus-review">
    <div class="chapter__inner">
      <span class="chapter__eyebrow reveal">番外篇 · 當你加入團隊</span>
      <h2 class="chapter__title reveal-title">
        <i class="ph ph-chat-circle-text chapter__icon"></i>
        <span class="chapter__title-en">review</span>
        <span class="chapter__title-zh">變更審查</span>
      </h2>
      <div class="chapter__body">
        <p class="reveal reveal-delay-2">
          PR 不是直接合併，而是先經過團隊審查。<br />
          審查的目的是<strong>品質把關</strong>和<strong>知識共享</strong>。
        </p>

        <!-- 設計師類比 -->
        <div class="inline-callout reveal reveal-delay-3">
          <i class="ph-fill ph-lightbulb inline-callout__icon"></i>
          <p>
            像設計 Critique——同事看你的作品給回饋，<br />
            確保設計符合規範，也讓團隊了解你在做什麼。
          </p>
        </div>

        <!-- 審查狀態說明 -->
        <div class="divider reveal reveal-delay-4"></div>
        <h3 class="reveal reveal-delay-5">審查狀態</h3>
        <ul class="tools-list reveal reveal-delay-6">
          <li>
            <strong>Pending（等待中）</strong>
            <span>— 等待審查</span>
          </li>
          <li>
            <strong>Changes Requested（請修改）</strong>
            <span>— 需要調整後重新送審</span>
          </li>
          <li>
            <strong>Approved（通過）</strong>
            <span>— 可以合併了</span>
          </li>
        </ul>

        <!-- CLI 區塊 -->
        <div class="divider reveal reveal-delay-7"></div>
        <p class="reveal reveal-delay-8">
          收到回饋後，修改並推送——<br />
          PR 會<strong>自動更新</strong>，等待再次審查。
        </p>
        <div class="cli-block reveal reveal-delay-9">
          <div class="cli-block__content">
            <span class="cli-block__prompt">$</span>
            <code class="cli-block__command">git commit -m "fix: 根據回饋修正"</code>
          </div>
          <button class="cli-block__copy" type="button" aria-label="複製指令">
            <i class="ph ph-copy cli-block__copy-icon"></i>
            <span>複製</span>
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- ═══════════════════════════════════════════════════════════════
       番外篇 3：Merge Strategy（合併策略）
       ═══════════════════════════════════════════════════════════════ -->
  <section class="chapter" id="bonus-merge-strategy">
    <div class="chapter__inner">
      <span class="chapter__eyebrow reveal">番外篇 · 當你加入團隊</span>
      <h2 class="chapter__title reveal-title">
        <i class="ph ph-git-merge chapter__icon"></i>
        <span class="chapter__title-en">merge strategy</span>
        <span class="chapter__title-zh">合併策略</span>
      </h2>
      <div class="chapter__body">
        <p class="reveal reveal-delay-2">
          同一個 PR，可以用<strong>不同方式</strong>合併——<br />
          取決於你想要什麼樣的歷史紀錄。
        </p>

        <!-- 兩種策略說明（簡化版）-->
        <div class="divider reveal reveal-delay-3"></div>
        <h3 class="reveal reveal-delay-4">兩種常見方式</h3>
        <ul class="tools-list reveal reveal-delay-5">
          <li>
            <strong>Merge commit（合併提交）</strong>
            <span>— 保留完整歷史，像保留每個設計迭代的圖層</span>
          </li>
          <li>
            <strong>Squash and merge（壓縮合併）</strong>
            <span>— 壓縮成單一 commit，像把圖層群組合併</span>
          </li>
        </ul>

        <!-- 提示 -->
        <div class="inline-callout reveal reveal-delay-6">
          <i class="ph-fill ph-lightbulb inline-callout__icon"></i>
          <p>
            團隊通常會統一一種策略，<br />
            確保歷史紀錄風格一致。<br />
            加入團隊後，問問他們用哪種就好。
          </p>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<script>
  import { initClipboard } from '../scripts/clipboard';

  // 初始化複製功能
  document.addEventListener('DOMContentLoaded', () => {
    initClipboard();
  });
</script>
